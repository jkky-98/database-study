# UNION

JOIN은 좌우로 더 확장하는 방식이었다면 UNION은 수직방향, 위 아래로 확장하는 기술이다.

만약 users 테이블과 users_retired 테이블이 존재할 때 서로의 전체 결과를 합쳐서 보여줘야한다면

```sql
select name as '이름' from users --- 80명
union
select name as '이름2' from users_retired --- 40명
```
와 같이 120(80명 + 40명)명의 결과를 보여줄 수 있다.

당연히 컬럼들은 서로 호환가능한 데이터 타입이어야한다.

기준은 첫번째 select문에 설정된다.

- 만약 users의 user_id와 users_retired의 name을 수직으로 쌓는다면 당연히 문제가 될 수 밖에 없다. -> 에러

- 두 셀렉트문의 union의 경우 첫번째 셀렉트문의 별칭(as)가 사용된 최종 결과를 얻는다.

- UNION으로 연결되는 모든 셀렉트 문은 컬럼의 개수가 동일해야한다.

- order by절은 마지막 셀렉트문 뒤에 작성할 수 있따.

## UNION ALL

실제로 UNION은 성능상 문제가 될 수 있다.

UNION은 각 셀렉트 문의 결과에서 중복을 빼는 작업이 추가되기 때문이다.

즉 위 예시 쿼리문에서 '마리퀴리'란 이름을 가진 레코드가 users, users_retired에도 있다면 하나는 누락되어 나타난다.

반면 union all은 그러한 중복빼기 작업 없이 통으로 두 셀렉트문 결과를 위아래로 붙인다.

중복제거가 없기에 이 부분은 유의해야하나 성능적으로 걱정할 것은 두 셀렉트문이 얼마나 오래걸리느냐만 생각하면 된다.

중복제거에 대한 요구사항이 없다면 우선적으로 `UNION ALL`을 고려한다.